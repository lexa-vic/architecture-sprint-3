Это шаблон для решения **первой части** проектной работы. Структура этого файла повторяет структуру заданий. Заполняйте его по мере работы над решением.

# Задание 1. Анализ и планирование

Чтобы составить документ с описанием текущей архитектуры приложения, можно часть информации взять из описания компании условия задания. Это нормально.

### 1. Описание функциональности монолитного приложения

**Настройка системы:**
- Прилоежние поддерживает добавление новых систем отопления 
- Приложение может вернуть данные о конкретной системе отопления по id

**Управление отоплением:**

- Пользователь может включить определную систему отопления
- Пользователь может отключить определную систему отопления
- Пользователь может задать желаемую температуру

**Мониторинг температуры:**

- Пользователь может запросить текущую температуру

### 2. Анализ архитектуры монолитного приложения

Перечислите здесь основные особенности текущего приложения: какой язык программирования используется, какая база данных, как организовано взаимодействие между компонентами и так далее.

- Архитектура приложения представляет из себя монолит на Java с СУБД Postgres.
- Приложение построено с использованием фреймворка Spring Boot
- Ключевые слои приложения:
  - Controller — для управления HTTP-запросами (REST API).
  - Service — для реализации бизнес-логики.
  - Repository — для работы с базой данных.
  - Entity — для представления данных в виде объектов Java.
- Всё синхронно. Никаких асинхронных вызовов, микросервисов и реактивного взаимодействия в системе нет.
- В коде предусмотрена обработка ошибок, например, выброс исключения при отсутствии записи в базе данных. (RuntimeException) 
- Пользовательской статистики и аналитики нет.

### 3. Определение доменов и границы контекстов

Домены которые вижу в целевой картине

**1. Управление пользователями**

    Контекст:
        - Сущности: Пользователь, Роль, Сессия, Тариф
        - Сервисы: Регистрация, Авторизация, Оплата

**2. Управление устройствами (IoT-экосистема)**
    
    Контектс: 
        - Сущности: Устройство, Тип устройства, Протокол связи
        - Сервисы: Регистрация устройства, Управление состоянием (вкл/отключение), Втложенное включение, Статус

**3. Телеметрия и мониторинг**

    Контектс: 
        - Сущности: Метрика, Алерт, Телеметрия (набор метрик с какого-то девайса)

**4. Сценарии пользователя**

    Контектс: 
        - Сущности: Сценарий, Тригер, Действие

### **4. Проблемы монолитного решения**

- Ограниченная функциональность:
    - Управляет только отоплением и температурой
    - Отсутствует функциональность для целевой архитектуры: поддержка сторонних устройств
    - Пользователь не может самостоятельно добавить устройство, только с помощью специалиста
    - Для Saas нужно чтобы система был многопользовательской, иметь биллинг, безопастная, с локальзацией, с мониторингом и телемтрией
- Отсутствие масштабируемости:
    - Нет репликации данных
    - Монолит сложнее и менее эффективний масштабировать
    - Приложение statful, что усложняет масштабирование - даже если мы добавляем инстансы, то у нас есть блокировки и борьба за состояние
- Синхронные вызовы
    - Блокировки и снежении производтельности
- Низкая отказоустойчивость
    - Если откажет монолит, откажет все
- Развертываемость
    - Надо останавливать работу всего сервиса, для добавления функциональности

### 5. Визуализация контекста системы — диаграмма С4

[Диаграмма С4 Context](С4_Context.puml)

![Context_C4 text](image-1.png)

# Задание 2. Проектирование микросервисной архитектуры

**Диаграмма контейнеров (Containers)**

[Диаграмма С4 Container](С4_Containers.puml)

![alt text](image-3.png)

**Диаграмма компонентов (Components)**

[Диаграмма компонентов](C4_Component.puml)

![alt text](image-2.png)

**Диаграмма кода (Code)**

[Диаграмма кода сервиса Управления устройствами](C4_Code_Device_service.puml)
![alt text](image-4.png)

# Задание 3. Разработка ER-диаграммы

Общая примерная схема сущностей
[ER диаграмма](ER_diagram.puml)

![alt text](image-5.png)